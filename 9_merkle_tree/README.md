# Merkle Tree

Алгоритм позволяет проверить есть ли транзакция в блоке.
Для ответа на этот вопрос строится дерево Меркла. Оно позволяет быстро ответить на вопрос.

## Как строится дерево?

В блоке содержатся транзакции в количестве 2^n. Для транзакций расчитывается hash. Далее хеши группируются в пары и для пары расчитывается новый hash. Процесс завершается после расчета root hash.

## Проверка наличия транзакции

Для проверки потребуется:
- данные транзакции,
- индекс транзакции в блоке,
- root hash,
- массив проверочных hash на основе которых можно расчитать root hash.

```
     ROOT
    /    \
 H1-2    H3-4
/   \   /   \
H1  H2  H3  H4
|   |   |   |
T1  T2  T3  T4
```

Например, транзакция `T3`. Данные транзакции - строка с данными. Индекс = 2 (расчет начинается с 0). Root hash. Массив проверочных hash будет состоять из `H4` и `H1-2`.

## Code
Конструктор контракта наполняет массив hashes. Далее из него получим необходимые hash: root (index: 6), H1-2 (index: 4), H3-4 (index: 5)
В контракте задачу верификации выполняет метод `verify()`. Данные передаваемые на вход:
```
transaction_data: "TX3: u2 -> u3"
index: 2
root: 0xac6274194307acf95d2aefdc03354c95d5853d21d5189d5c7020685793081601
proof: ["0x129baa6f7e3b646d930ff03a113cbcf78d9c866ef1b25ee50ef680b886eb044a", "0x798488b33e092ed2e344f546323bf3f186321538d9ddfedd46f395c3fd9e56da"]
```
В результате проверки получаем true/false.